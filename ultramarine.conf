# RELEASE
release_name = "Ultramarine Linux"
release_short = "Ultramarine"
release_version = "35"
release_type="ga"

# GENERAL SETTINGS
comps_file = {
        'scm': 'git',
        'repo': 'https://gitlab.ultramarine-linux.org/release-engineering/ultramarine-comps.git',
        'file': 'comps-um35.xml',
}

release_internal = False
variants_file = "variants.xml"

pkgset_source = "koji"
pkgset_koji_tag = "um35"
#pkgset_repos = {
#    'x86_64': [
#        'http://dl.fedoraproject.org/pub/fedora/linux/releases/35/Everything/x86_64/os/'
#        'https://dl.fedoraproject.org/pub/fedora/linux/updates/35/Everything/x86_64/'
#    ],
#}


volume_id_substitutions ={
    'Flagship': 'Fl',
    'Cutefish': 'Cf',
    'Pantheon': 'Pt'
}

disc_types = {
    'boot': 'netinst',
    'live': 'Live',
}



gather_method = "deps"
gather_backend = 'dnf'
gather_profiler = True
check_deps = False
greedy_method = 'all'
gather_fulltree = True
gather_allow_reuse = True
gather_selfhosting = True
filter_system_release_packages = False

repoclosure_strictness = [
    ('^.*$', {'*': 'off'}),
]

gather_lookaside_repos =[
    ('^.*$', {'*': [
                'https://dl.fedoraproject.org/pub/fedora/linux/releases/35/Everything/$basearch/os',
                'https://dl.fedoraproject.org/pub/fedora/linux/updates/35/Everything/$basearch/',
                'https://download1.rpmfusion.org/free/fedora/releases/35/Everything/$basearch/os/',
                'https://download1.rpmfusion.org/free/fedora/tainted/35/$basearch/',
                'https://download1.rpmfusion.org/nonfree/fedora/releases/35/Everything/$basearch/os/',
                'https://download1.rpmfusion.org/nonfree/fedora/tainted/35/$basearch/',
            ]}),

]


# I literally dont know how it wouldn't pull all packages from the repo
additional_packages = [
    ('^Everything$', {
        '*': [
            '*',
        ],
    })
]


# CREATEREPO
createrepo_deltas = False
createrepo_database = True
createrepo_checksum = "sha256"
createrepo_use_xz = True
createrepo_num_threads = 16
createrepo_num_workers = 16
createrepo_extra_args = ['--distro=cpe:/o:ultramarine:ultramarine:35,Ultramarine Linux 35']

disc_types = {
    'boot': 'netinst',
    'live': 'Live',
}
image_volid_formats = [
     '%(release_short)s-%(variant)s-%(disc_type)s-%(arch)s-%(version)s'
]


### Media Compose ###
global_ksurl = 'git+https://gitlab.ultramarine-linux.org/release-engineering/build-scripts.git#HEAD'
#global_release = '!RELEASE_FROM_LABEL_DATE_TYPE_RESPIN'
global_version = '35'
# live_images ignores this in favor of live_target
global_target = 'um35'

volume_id_substitutions = {
    'Flagship': 'Fl',
    'Cutefish': 'Cf',
    'Everything': 'Ev', # Stands for Buffet
    'Pantheon': 'Pt'
}

translate_paths = [
   ('/mnt/koji/', 'https://lapis.ultramarine-linux.org/kojifiles/'),
]

# checksum stuff
media_checksums = ['sha256']
media_checksum_one_file = True
create_jigdo = False

filter_packages = [
    # bz#111222
    ('^.*$', {
        '*': [
            'fedora-release',
            'generic-release',
        ],
    }),
]

# BUILDINSTALL
buildinstall_method = "lorax"

lorax_extra_sources = [
    ('^.*$', {
        '*': 'https://lapis.ultramarine-linux.org/kojifiles/repos/um35-build/latest/x86_64/',
    })
]

lorax_use_koji_plugin = False

lorax_options = [
    ("^.*$", {
        "x86_64": {
            "nomacboot": False
        }
        "*": {
            "noupgrade": True,
            "skip_branding": True # True becuase we have our own branding in our own templates
            "configuration_file": "lorax.conf",
           #"buildinstall_kickstart": "ks.cfg",
        }
    })
]
buildinstall_allow_reuse = True

live_media = {
    '^Flagship$':[
        {
            'name': 'Ultramarine-Flagship-Live',
            'kickstart': 'kickstarts/ultramarine-budgie.ks',
            'arches': ['x86_64'],
            'repo': [
                'https://dl.fedoraproject.org/pub/fedora/linux/releases/35/Everything/$basearch/os',
                'https://dl.fedoraproject.org/pub/fedora/linux/updates/35/Everything/$basearch/',
                'https://download1.rpmfusion.org/free/fedora/releases/35/Everything/$basearch/os/',
                'https://download1.rpmfusion.org/free/fedora/tainted/35/$basearch/',
                'https://download1.rpmfusion.org/nonfree/fedora/releases/35/Everything/$basearch/os/',
                'https://download1.rpmfusion.org/nonfree/fedora/tainted/35/$basearch/',
            ],
            'install_tree_from': 'Everything',
            'scratch': True

        }
    ]
    '^Pantheon$':[
        {
            'name': 'Ultramarine-Pantheon-Live',
            'kickstart': 'kickstarts/ultramarine-pantheon.ks',
            'arches': ['x86_64'],
            'repo': [
                'https://dl.fedoraproject.org/pub/fedora/linux/releases/35/Everything/$basearch/os',
                'https://dl.fedoraproject.org/pub/fedora/linux/updates/35/Everything/$basearch/',
                'https://download1.rpmfusion.org/free/fedora/releases/35/Everything/$basearch/os/',
                'https://download1.rpmfusion.org/free/fedora/tainted/35/$basearch/',
                'https://download1.rpmfusion.org/nonfree/fedora/releases/35/Everything/$basearch/os/',
                'https://download1.rpmfusion.org/nonfree/fedora/tainted/35/$basearch/',
            ],
            'install_tree_from': 'Everything',
            'scratch': True

        }
    ]

    '^Cutefish$':[
        {
            'name': 'Ultramarine-Cutefish-Live',
            'kickstart': 'kickstarts/ultramarine-cutefish.ks',
            'arches': ['x86_64'],
            'repo': [
                'https://dl.fedoraproject.org/pub/fedora/linux/releases/35/Everything/$basearch/os',
                'https://dl.fedoraproject.org/pub/fedora/linux/updates/35/Everything/$basearch/',
                'https://download1.rpmfusion.org/free/fedora/releases/35/Everything/$basearch/os/',
                'https://download1.rpmfusion.org/free/fedora/tainted/35/$basearch/',
                'https://download1.rpmfusion.org/nonfree/fedora/releases/35/Everything/$basearch/os/',
                'https://download1.rpmfusion.org/nonfree/fedora/tainted/35/$basearch/',
            ],
            'install_tree_from': 'Everything',
            'scratch': True

        }
    ]
}

createiso_skip = [
        ('^Everything$', {
            '*': True,
            'src': True
        })

]


koji_profile = "koji"